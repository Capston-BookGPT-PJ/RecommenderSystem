# ==============================
# 1️⃣ 기본 이미지
# ==============================
FROM python:3.10-slim

# ==============================
# ✅ 한국 시간대 설정 추가 (UTC → KST)
# ==============================
RUN apt-get update && apt-get install -y tzdata
ENV TZ=Asia/Seoul

# ==============================
# 2️⃣ 작업 디렉터리 설정
# ==============================
WORKDIR /app

# ==============================
# 3️⃣ 필요한 파일 복사
# ==============================
COPY requirements.txt ./
COPY app.py ./
COPY recommender ./recommender
COPY data ./data

# ==============================
# 4️⃣ 패키지 설치
# ==============================
RUN pip install --no-cache-dir -r requirements.txt

# ==============================
# 5️⃣ Flask 실행 포트 설정
# ==============================
EXPOSE 8000

# ==============================
# 6️⃣ 환경 변수 설정
# ==============================
ENV FLASK_APP=app.py
ENV FLASK_RUN_HOST=0.0.0.0
ENV FLASK_RUN_PORT=8000

# ==============================
# 7️⃣ Flask 서버 실행 명령
# ==============================
CMD ["flask", "run"]
